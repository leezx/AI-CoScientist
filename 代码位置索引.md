# ä»£ç ä½ç½®ç´¢å¼•ï¼šPrompt å’Œ ç®—æ³•

## ğŸ“ æ–‡ä»¶ä½ç½®

**æ‰€æœ‰ä»£ç éƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼š**
- **`ai_coscientist/main.py`** - è¿™æ˜¯å”¯ä¸€çš„æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰Promptå’Œç®—æ³•

---

## ğŸ”¤ Prompt ä½ç½®ï¼ˆ8ä¸ªAgentçš„Promptï¼‰

### 1. ç”ŸæˆAgent Prompt
**ä½ç½®ï¼š** `main.py` ç¬¬ **397-434è¡Œ**
```python
def _get_generation_agent_prompt(self) -> str:
    """Prompt for the Hypothesis Generation Agent."""
    return """You are a Hypothesis Generation Agent...
```

### 2. åæ€Agent Promptï¼ˆè¯„å®¡ï¼‰
**ä½ç½®ï¼š** `main.py` ç¬¬ **436-484è¡Œ**
```python
def _get_reflection_agent_prompt(self) -> str:
    """Prompt for the Hypothesis Reflection Agent (Reviewer)."""
    return """You are a Hypothesis Reflection Agent...
```

### 3. æ’åAgent Prompt
**ä½ç½®ï¼š** `main.py` ç¬¬ **486-520è¡Œ**
```python
def _get_ranking_agent_prompt(self) -> str:
    """Prompt for the Hypothesis Ranking Agent."""
    return """You are a Hypothesis Ranking Agent...
```

### 4. è¿›åŒ–Agent Prompt
**ä½ç½®ï¼š** `main.py` ç¬¬ **522-580è¡Œ**
```python
def _get_evolution_agent_prompt(self) -> str:
    """Prompt for the Hypothesis Evolution Agent (Refiner)."""
    return """You are a Hypothesis Evolution Agent...
```

### 5. å…ƒè¯„å®¡Agent Prompt
**ä½ç½®ï¼š** `main.py` ç¬¬ **582-658è¡Œ**
```python
def _get_meta_review_agent_prompt(self) -> str:
    """Prompt for the Meta-Review Agent."""
    return """You are a Meta-Review Agent...
```

### 6. é‚»è¿‘åº¦Agent Prompt
**ä½ç½®ï¼š** `main.py` ç¬¬ **660-715è¡Œ**
```python
def _get_proximity_agent_prompt(self) -> str:
    """Prompt for the Proximity Agent (Similarity Analysis)."""
    return """You are a Proximity Agent...
```

### 7. é”¦æ ‡èµ›Agent Prompt
**ä½ç½®ï¼š** `main.py` ç¬¬ **717-754è¡Œ**
```python
def _get_tournament_agent_prompt(self) -> str:
    """Prompt for the Tournament Agent (for pairwise hypothesis comparison)."""
    return """You are a Tournament Judge Agent...
```

### 8. ç›‘ç£Agent Prompt
**ä½ç½®ï¼š** `main.py` ç¬¬ **756-842è¡Œ**
```python
def _get_supervisor_agent_prompt(self) -> str:
    """Prompt for the Supervisor Agent (manages the overall workflow)."""
    return """You are a Supervisor Agent...
```

---

## âš™ï¸ ç®—æ³•ä½ç½®

### 1. Eloè¯„åˆ†ç®—æ³•ï¼ˆæ ¸å¿ƒç®—æ³•ï¼‰
**ä½ç½®ï¼š** `main.py` ç¬¬ **177-208è¡Œ**
```python
def update_elo(self, opponent_elo: int, win: bool, k_factor: int = 32):
    """Update the Elo rating based on a tournament match outcome."""
    expected_score = 1 / (1 + 10 ** ((opponent_elo - self.elo_rating) / 400))
    actual_score = 1.0 if win else 0.0
    self.elo_rating += int(k_factor * (actual_score - expected_score))
```
**æ‰€å±ç±»ï¼š** `Hypothesis` ç±»ï¼ˆç¬¬150-228è¡Œï¼‰

### 2. JSONè§£æç®—æ³•ï¼ˆå®¹é”™æœºåˆ¶ï¼‰
**ä½ç½®ï¼š** `main.py` ç¬¬ **844-931è¡Œ**
```python
def _safely_parse_json(self, json_str: str) -> Dict[str, Any]:
    """Safely parse JSON string, handling potential errors."""
    # ç­–ç•¥1ï¼šæ ‡å‡†JSONè§£æ
    # ç­–ç•¥2ï¼šå»é™¤markdownæ ‡è®°
    # ç­–ç•¥3ï¼šéƒ¨åˆ†è§£æ
    # ç­–ç•¥4ï¼šæ­£åˆ™æå–
```
**æ‰€å±ç±»ï¼š** `AIScientistFramework` ç±»

### 3. é”¦æ ‡èµ›ç®—æ³•ï¼ˆEloæ›´æ–°é€»è¾‘ï¼‰
**ä½ç½®ï¼š** `main.py` ç¬¬ **1627-1764è¡Œ**
```python
def _run_tournament_phase(self, hypotheses: List[Hypothesis]):
    """Run tournament selection and Elo rating update."""
    # éšæœºé€‰æ‹©ä¸¤ä¸ªå‡è®¾
    # è°ƒç”¨Tournament Agentåˆ¤æ–­èƒœè´Ÿ
    # ä½¿ç”¨update_elo()æ›´æ–°è¯„åˆ†
    # æŒ‰Eloæ’åº
```
**æ‰€å±ç±»ï¼š** `AIScientistFramework` ç±»

### 4. æ‰§è¡Œæ—¶é—´è¿½è¸ªç®—æ³•
**ä½ç½®ï¼š** `main.py` ç¬¬ **933-975è¡Œ**
```python
def _time_execution(self, agent_name: str, start_time: float):
    """Track execution time for an agent."""
    execution_time = time.time() - start_time
    # æ›´æ–°æŒ‡æ ‡
```
**æ‰€å±ç±»ï¼š** `AIScientistFramework` ç±»

### 5. æ’åºç®—æ³•ï¼ˆPythonå†…ç½®ï¼‰
**ä½ç½®ï¼š** å¤šå¤„ä½¿ç”¨
- ç¬¬ **1318-1322è¡Œ**ï¼šæŒ‰åˆ†æ•°æ’åºï¼ˆé™çº§ç­–ç•¥ï¼‰
- ç¬¬ **1755è¡Œ**ï¼šæŒ‰Eloè¯„åˆ†æ’åº
```python
hypotheses.sort(key=lambda h: h.elo_rating, reverse=True)
```

---

## ğŸ“Š æ•°æ®ç»“æ„ä½ç½®

### Hypothesisç±»ï¼ˆæ ¸å¿ƒæ•°æ®ç»“æ„ï¼‰
**ä½ç½®ï¼š** `main.py` ç¬¬ **150-228è¡Œ**
```python
@dataclass
class Hypothesis:
    text: str
    elo_rating: int = 1200
    reviews: List[HypothesisReview] = field(default_factory=list)
    score: float = 0.0
    # ... å…¶ä»–å­—æ®µ
    
    def update_elo(self, ...):  # Eloç®—æ³•åœ¨è¿™é‡Œ
    def to_dict(self) -> Dict[str, Any]:  # åºåˆ—åŒ–æ–¹æ³•
```

---

## ğŸ”„ å·¥ä½œæµç¨‹ä½ç½®

### ä¸»å·¥ä½œæµç¨‹
**ä½ç½®ï¼š** `main.py` ç¬¬ **1766-1919è¡Œ**
```python
def run_research_workflow(self, research_goal: str) -> WorkflowResult:
    """Execute the AI co-scientist research workflow."""
    # 1. ç”Ÿæˆé˜¶æ®µ
    # 2. åæ€é˜¶æ®µ
    # 3. æ’åé˜¶æ®µ
    # 4. é”¦æ ‡èµ›é˜¶æ®µ
    # 5. è¿­ä»£ä¼˜åŒ–å¾ªç¯
```

### å„é˜¶æ®µå®ç°
- **ç”Ÿæˆé˜¶æ®µï¼š** ç¬¬ **977-1142è¡Œ** `_run_generation_phase()`
- **åæ€é˜¶æ®µï¼š** ç¬¬ **1144-1244è¡Œ** `_run_reflection_phase()`
- **æ’åé˜¶æ®µï¼š** ç¬¬ **1246-1328è¡Œ** `_run_ranking_phase()`
- **è¿›åŒ–é˜¶æ®µï¼š** ç¬¬ **1330-1460è¡Œ** `_run_evolution_phase()`
- **å…ƒè¯„å®¡é˜¶æ®µï¼š** ç¬¬ **1462-1526è¡Œ** `_run_meta_review_phase()`
- **é‚»è¿‘åº¦åˆ†æï¼š** ç¬¬ **1528-1625è¡Œ** `_run_proximity_analysis_phase()`
- **é”¦æ ‡èµ›é˜¶æ®µï¼š** ç¬¬ **1627-1764è¡Œ** `_run_tournament_phase()`

---

## ğŸ¯ å¿«é€ŸæŸ¥æ‰¾æŒ‡å—

### æƒ³æŸ¥çœ‹æ‰€æœ‰Promptï¼Ÿ
**æœç´¢ï¼š** `_get_.*_agent_prompt`
**ä½ç½®ï¼š** ç¬¬397-842è¡Œï¼ˆ8ä¸ªæ–¹æ³•ï¼‰

### æƒ³æŸ¥çœ‹æ‰€æœ‰ç®—æ³•ï¼Ÿ
**æœç´¢ï¼š** `update_elo|_safely_parse_json|_time_execution|\.sort\(`
**å…³é”®ä½ç½®ï¼š**
- Eloç®—æ³•ï¼šç¬¬177-208è¡Œ
- JSONè§£æï¼šç¬¬844-931è¡Œ
- é”¦æ ‡èµ›ï¼šç¬¬1627-1764è¡Œ

### æƒ³æŸ¥çœ‹å·¥ä½œæµç¨‹ï¼Ÿ
**æœç´¢ï¼š** `run_research_workflow|_run_.*_phase`
**ä½ç½®ï¼š** ç¬¬977-1919è¡Œ

---

## ğŸ“ æ€»ç»“

| å†…å®¹ | æ–‡ä»¶ | è¡Œå·èŒƒå›´ |
|------|------|----------|
| **æ‰€æœ‰Prompt** | `main.py` | 397-842è¡Œ |
| **Eloç®—æ³•** | `main.py` | 177-208è¡Œ |
| **JSONè§£æ** | `main.py` | 844-931è¡Œ |
| **é”¦æ ‡èµ›é€»è¾‘** | `main.py` | 1627-1764è¡Œ |
| **ä¸»å·¥ä½œæµç¨‹** | `main.py` | 1766-1919è¡Œ |
| **æ•°æ®ç»“æ„** | `main.py` | 150-228è¡Œ |

**æç¤ºï¼š** æ‰€æœ‰ä»£ç éƒ½åœ¨ `ai_coscientist/main.py` è¿™ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå…±çº¦2000è¡Œä»£ç ã€‚
